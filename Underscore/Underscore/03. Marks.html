<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
	<title></title>
	<script src="../Scripts/class.js"></script>
	<script src="../Scripts/underscore.js"></script>
</head>
<body>
    <div id="content">
    <label for="fname">First Name: </label>
    <input type="text" id="fname" />
    <label for="lname">Second Name: </label>
    <input type="text" id="lname" />
    <a href="#" id="send" onclick="onSendBottonClick()">Send</a>
    <label for="mark">Mark: </label>
    <input type="text" id="mark" />
    <label for="id">Id: </label>
    <input type="text" id="id" />
    <a href="#" id="send-mark" onclick="onSendMarkBottonClick()">Send  Mark</a>
    <a href="#" id="calc" onclick="onCalcBottonClick()">Calc</a>
	<div id="result"></div>
    </div>
	<script>
	    var Person = Class.create({
	        init: function (fname, lname) {
	            this.fname = fname;
	            this.lname = lname;
	            this.marks = [];
	        },
	        toString: function () {
	            return this.fname + " " + this.lname;
	        },
	        average: function() {
	            var sum = 0;
	            _.each(this.marks, function(m) {
	                sum += m;
	            });
	            return sum;
	        }
	    });

	    var students = [];

	    function onSendBottonClick() {

	        var firstName = document.getElementById("fname").value;
	        var lastName = document.getElementById("lname").value;
	        var person = new Person(firstName, lastName);
	        students.push(person);
	    }

	    function onSendMarkBottonClick() {

	        var mark = document.getElementById("mark").value;
	        var id = document.getElementById("id").value;
	        students[id].marks.push(mark);
	    }

	    function onCalcBottonClick() {

	        var max = _.max(students, function (item) {
	            return item.average();
	        });

	        console.log(max.toString());
	    }
	</script>
</body>
</html>
